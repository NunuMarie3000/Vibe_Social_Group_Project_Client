{"ast":null,"code":"var _jsxFileName = \"/home/nunumarie3000/projects/courses/Code301/Vibe_Social_Group_Project_Client/client/src/components/BetweenAppAndEverything.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Header from \"./Header\";\nimport axios from \"axios\";\nimport Everything from \"./Everything\";\nimport LoadingPage from '../components/LoadingPage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function BetweenAppAndEverything(_ref) {\n  _s();\n\n  let {\n    logout,\n    user\n  } = _ref;\n  const [allMemories, setAllMemories] = useState('');\n  const [userId, setUserId] = useState('');\n  const [allUsers, setAllUsers] = useState(''); // create loading hook\n\n  const [areWeLoading, setAreWeLoading] = useState(false); //for profile component\n\n  const getMemories = async () => {\n    const userAPI = `${process.env.REACT_APP_APIURL}/memories`;\n\n    try {\n      let res = await axios.get(userAPI);\n      setAllMemories(res.data);\n      getEmailsOfOtherUsers();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const getEmailsOfOtherUsers = async () => {\n    const userAPI = `https://memories-socialmedia-group.herokuapp.com/users`;\n\n    try {\n      await axios.get(userAPI).then(res => setAllUsers(res.data));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const getIdFromDb = async () => {\n    const email = user.email;\n    const url = `https://memories-socialmedia-group.herokuapp.com/useremail/${email}`;\n\n    try {\n      const response = await axios.get(url);\n\n      if (response.data.user === null || response.data.user === '' || response.data.user === undefined) {\n        createNewUsersId();\n      } else {\n        setUserId(response.data.user._id);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n\n    getMemories();\n  };\n\n  const createNewUsersId = async () => {\n    const url = `https://memories-socialmedia-group.herokuapp.com/newuser`;\n    const body = {\n      email: user.email\n    };\n\n    try {\n      const response = await axios.post(url, body);\n      setUserId(response.data._id);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    setAreWeLoading(true);\n    getIdFromDb();\n    setAreWeLoading(false); //eslint-disable-next-line\n  }, []);\n\n  if (areWeLoading) {\n    return /*#__PURE__*/_jsxDEV(LoadingPage, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mainLogo\",\n          children: \"VIBE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), allMemories !== '' && userId !== '' && allUsers !== '' && /*#__PURE__*/_jsxDEV(Header, {\n          getMemories: getMemories,\n          allUsers: allUsers,\n          user: user,\n          logout: logout,\n          allMemories: allMemories,\n          userId: userId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 72\n        }, this), allMemories !== '' && userId !== '' && allUsers !== '' && /*#__PURE__*/_jsxDEV(Everything, {\n          allUsers: allUsers,\n          user: user,\n          userInfoFromAuth: user,\n          allMemories: allMemories,\n          getMemories: getMemories,\n          userId: userId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 72\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this)\n    }, void 0, false);\n  }\n}\n\n_s(BetweenAppAndEverything, \"n9oaXwmBDFLXBLDoIw3bvP7wms4=\");\n\n_c = BetweenAppAndEverything;\n\nvar _c;\n\n$RefreshReg$(_c, \"BetweenAppAndEverything\");","map":{"version":3,"names":["React","useState","useEffect","Header","axios","Everything","LoadingPage","BetweenAppAndEverything","logout","user","allMemories","setAllMemories","userId","setUserId","allUsers","setAllUsers","areWeLoading","setAreWeLoading","getMemories","userAPI","process","env","REACT_APP_APIURL","res","get","data","getEmailsOfOtherUsers","error","console","log","then","getIdFromDb","email","url","response","undefined","createNewUsersId","_id","body","post"],"sources":["/home/nunumarie3000/projects/courses/Code301/Vibe_Social_Group_Project_Client/client/src/components/BetweenAppAndEverything.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Header from \"./Header\";\nimport axios from \"axios\";\nimport Everything from \"./Everything\"\nimport LoadingPage from '../components/LoadingPage';\n\nexport default function BetweenAppAndEverything({ logout, user }) {\n\n  const [allMemories, setAllMemories] = useState('')\n  const [userId, setUserId] = useState('')\n  const [allUsers, setAllUsers] = useState('')\n  // create loading hook\n  const [areWeLoading, setAreWeLoading] = useState(false);\n  //for profile component\n\n  const getMemories = async () => {\n    const userAPI = `${process.env.REACT_APP_APIURL}/memories`;\n    try {\n      let res = await axios.get(userAPI);\n      setAllMemories(res.data)\n      getEmailsOfOtherUsers()\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  const getEmailsOfOtherUsers = async () => {\n    const userAPI = `https://memories-socialmedia-group.herokuapp.com/users`\n    try {\n      await axios.get(userAPI).then(res => setAllUsers(res.data))\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  const getIdFromDb = async () => {\n    const email = user.email\n    const url = `https://memories-socialmedia-group.herokuapp.com/useremail/${email}`\n    try {\n      const response = await axios.get(url)\n      if (response.data.user === null || response.data.user === '' || response.data.user === undefined) {\n        createNewUsersId()\n      } else {\n        setUserId(response.data.user._id)\n      }\n    } catch (error) {\n      console.log(error)\n    }\n    getMemories()\n  }\n\n  const createNewUsersId = async () => {\n    const url = `https://memories-socialmedia-group.herokuapp.com/newuser`\n    const body = {\n      email: user.email\n    }\n    try {\n      const response = await axios.post(url, body)\n      setUserId(response.data._id)\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  useEffect(() => {\n    setAreWeLoading(true);\n    getIdFromDb()\n    setAreWeLoading(false);\n    //eslint-disable-next-line\n  }, [])\n\n  if(areWeLoading)\n  {\n    return(\n      <LoadingPage/>\n    )\n  }\n  else\n  {\n    return(\n        <>\n          <div>\n            <div className = \"mainLogo\">VIBE</div>\n            {allMemories !== '' && userId !== '' && allUsers !== '' && <Header getMemories={getMemories} allUsers={allUsers} user={user} logout={logout} allMemories={allMemories} userId={userId} />}\n            {allMemories !== '' && userId !== '' && allUsers !== '' && <Everything allUsers={allUsers} user={user} userInfoFromAuth={user} allMemories={allMemories} getMemories={getMemories} userId={userId} />}\n          </div>\n        </>\n      )\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}